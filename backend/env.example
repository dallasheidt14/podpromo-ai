# Supabase Configuration
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-supabase-anon-key

# Paddle Configuration
PADDLE_ENVIRONMENT=sandbox  # Change to "production" when live
PADDLE_API_KEY=your-paddle-api-key
PADDLE_WEBHOOK_SECRET=your-webhook-secret
PADDLE_PRO_PRODUCT_ID=pro_01hq8q8q8q8q8q8q8q8q8q8q  # Replace with actual product ID from Paddle dashboard

# App Configuration
APP_URL=http://localhost:3000  # Change to your domain in production
DATABASE_URL=supabase
API_PREFIX=/api
ENV=development  # Set to "production" for production

# Security Configuration
SECRET_KEY=your-super-long-random-secret-key-change-in-production
MAX_FILE_BYTES=524288000  # 500MB in bytes

# CORS Configuration (JSON array format)
CORS_ORIGINS_JSON=["http://localhost:3000", "http://127.0.0.1:3000"]

# JWT Configuration (for authentication)
JWT_PUBLIC_KEY=your-jwt-public-key-pem-string
JWT_ISS=https://your-issuer
JWT_AUD=your-audience

# Data Directory Configuration (outside source tree to prevent file watcher restarts)
# For development, these can stay in the project directory
# For production, use external paths like /var/app-data/podpromo/
UPLOAD_DIR=./uploads
OUTPUT_DIR=./outputs
LOGS_DIR=./logs
TRANSCRIPTS_DIR=./uploads/transcripts
CLIPS_DIR=./outputs/clips

# Preview Configuration (for secure signed URLs)
PREVIEW_FS_DIR=./outputs/previews # Filesystem path where previews are stored
PREVIEW_SIGNING_KEY=your-preview-signing-secret-key # Must be a strong, random key
PREVIEW_URL_TTL_SECONDS=600 # Time-to-live for signed preview URLs in seconds (e.g., 10 minutes)

# Clip Length Configuration
CLIP_LEN_MIN=8.0 # Minimum clip length in seconds
CLIP_LEN_MAX=90.0 # Maximum clip length in seconds

# Title Generation Configuration
TITLE_ENGINE_V2=true # Enable V2 title engine (true/false)

# Production example (uncomment and modify for production):
# UPLOAD_DIR=/var/app-data/podpromo/uploads
# OUTPUT_DIR=/var/app-data/podpromo/outputs
# LOGS_DIR=/var/app-data/podpromo/logs
# TRANSCRIPTS_DIR=/var/app-data/podpromo/transcripts
# CLIPS_DIR=/var/app-data/podpromo/clips

# -------- Enhanced Features Configuration --------

# Prosody-based Arousal v2 (audio + text blending)
ENABLE_PROSODY_V2=1
AROUSAL_V2_BLEND_TEXT=0.6

# Trend Boost (privacy-safe trending signal)
ENABLE_TREND_BOOST=1
TREND_BOOST_WEIGHT=0.05
TRENDING_TERMS_FILE=/var/app/state/trending_terms.json

# Prerank Exploration (info-dense tail)
ENABLE_EXPLORATION=1
EXPLORATION_QUOTA=0.15
EXPLORATION_MIN=2

# Optional: Trending Data Collection Sources
# TRENDS_COUNTRIES=US,GB,CA,AU
# YOUTUBE_API_KEY=your_youtube_api_key
# REDDIT_CLIENT_ID=your_reddit_client_id
# REDDIT_SECRET=your_reddit_secret
# REDDIT_USER_AGENT=podpromo/1.0
# INTERNAL_TITLES_FILE=/var/app/state/recent_public_titles.txt
# TRENDING_TERMS_MAX=500

# -------- ASR v2 Configuration --------

# Model and Performance Settings (GPU Optimized)
ASR_MODEL=Systran/faster-whisper-large-v3
ASR_DEVICE=cuda
ASR_COMPUTE_TYPE=int8_float16  # Fast + accurate on 8GB VRAM
ASR_HQ_ON_RETRY_COMPUTE_TYPE=float16  # Higher quality retry

# Word Timestamps and VAD
ASR_WORD_TIMESTAMPS=1
ASR_VAD_FILTER=1
ASR_VAD_MIN_SILENCE_MS=300  # Correct parameter name
ASR_VAD_SPEECH_PAD_MS=200
ASR_COND_PREV=1

# Quality Retry Settings
ENABLE_ASR_V2=1
ENABLE_QUALITY_RETRY=1
ASR_BEAM_SIZE=1  # Optimized for speed
ASR_TEMPERATURES=0.0,0.2  # Reduced temperature range
ASR_LOW_QL_LOGPROB=-1.0
ASR_LOW_QL_COMPRESS=2.3
ASR_LOW_QL_MIN_PUNCT=0.25

# GPU Memory Management
ASR_GPU_MEMORY_FRACTION=0.85  # Leave headroom for previews

# Audio Pre-processing
AUDIO_PREDECODE_PCM=1  # Pre-decode audio to PCM WAV to eliminate mpg123 errors

# Quality-based Feature Weighting
ENABLE_ASR_QUALITY_WEIGHTING=1

# UI/Progress Labels
ASR_PROGRESS_LABEL_HQ=transcribing_hq

# CPU Fallback Profile (uncomment if GPU issues)
# ASR_DEVICE=cpu
# ASR_COMPUTE_TYPE=int8
# ASR_HQ_ON_RETRY_COMPUTE_TYPE=int8